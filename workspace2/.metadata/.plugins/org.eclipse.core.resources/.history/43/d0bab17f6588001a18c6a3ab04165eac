package com.jdbc.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.jdbc.dbconn.TelInfoDBConn;
import com.jdbc.vo.TelInfoVO;

public class TelInfoDAO {
	private Connection conn;
	PreparedStatement pstmt;
	ResultSet rs;
	
	public TelInfoDAO() throws ClassNotFoundException, SQLException {
		conn = new TelInfoDBConn().getConnection();
	}
	
	//전체 출력 메소드 getAllInfo()
	//VO와 연결하여 사용한다.
	public TelInfoVO getAllInfo() throws SQLException {
		String sql = "SELECT * FROM teltable5";
		pstmt = conn.prepareStatement(sql);
		
		TelInfoVO result = new TelInfoVO();
		rs = pstmt.executeQuery();
		while(rs.next()) {
			result.setId(rs.getInt("id"));
			result.setName(rs.getString("name"));
			result.setTel(rs.getString("tel"));
			result.setD(rs.getDate("d"));
		} return result;
	}
}
