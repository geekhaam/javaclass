package com.jdbc.main;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Scanner;

import javax.swing.JOptionPane;

import com.jdbc.dao.TelInfoDAO;
import com.jdbc.vo.TelInfoVO;

public class TelInfoMain {

	public static void main(String[] args) throws ClassNotFoundException, SQLException {
		TelInfoDAO dao = new TelInfoDAO();
		
		Scanner sc = new Scanner(System.in);
		
		int sel;
		do {
			System.out.println("비상 연락망 관리!!");
			System.out.println("----------------------------");
			System.out.println("1: 한명 입력\n2: 수정\n3: 삭제\n4: 전체 출력\n5: 종료");
			System.out.println("----------------------------");
			System.out.println("사용할 메뉴를 선택하세요");
			sel = Integer.parseInt(sc.next());
			switch(sel) {
			case 1:
				String name = JOptionPane.showInputDialog("조회할 이름 입력 : ");
				dao.getOneInfo(name);
				break;
			case 2:
				String prev = JOptionPane.showInputDialog("기존 이름 : ");
				String mod = JOptionPane.showInputDialog("수정 이름 : ");
				if(dao.update_nametel(prev, mod)) {
					System.out.println("UPDATE OK");
				} else {
					System.out.println("ERROR");
				} break;
			case 3:
				System.out.println("삭제할 이름 입력 : ");
			}
			
		} while(sel==5);
		
		//SELECT ALL
		
		ArrayList<TelInfoVO> result = dao.getAllInfo();
		
		for(TelInfoVO telInfo : result) {
			System.out.println("ID : " + telInfo.getId());
			System.out.println("이름 : " + telInfo.getName());
			System.out.println("전화번호 : " + telInfo.getTel());
			System.out.println("등록 날짜 : " + telInfo.getD() + "\n");
		}
		
		//UPDATE Name
		
	}

}
